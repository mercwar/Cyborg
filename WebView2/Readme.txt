# WebView2 – Pure ANSI C COM SDK (Pelles C Compatible)

## Overview

This repository contains a **clean-room, pure ANSI C (C89/C90)** implementation of the **Microsoft Edge WebView2 COM API**, rewritten directly from the official SDK headers and documentation.

At the time of writing, this appears to be **the only publicly available WebView2 interface layer designed explicitly for classic C toolchains** — without WinRT, without C++, without MIDL, and without any autogenerated IDL artifacts.

This project exists because **COM is a C ABI**, and modern SDKs no longer respect that reality.

---

## What Makes This Different

Most WebView2 integrations assume:
- C++
- WinRT projections
- MIDL-generated headers
- Modern build systems

This repository intentionally rejects all of that.

Instead, it provides:
- Hand-written COM vtables
- Explicit `IUnknown` usage
- Stable ABI targeting
- Toolchain independence

This is **not a wrapper**, and **not a shim** — it is a direct C interface to the WebView2 runtime.

---

## Repository Layout

### `webview2/`
This directory contains **our maintained WebView2 SDK files**.

These headers are:
- Uploaded and versioned directly in this repository
- Pinned to a known-working WebView2 SDK release (v58)
- Modified only to remove non-C constructs and tooling dependencies

This avoids:
- Breaking SDK updates
- Toolchain incompatibilities
- Dependency drift

If you use these headers, **you are using our SDK snapshot**, not Microsoft’s packaged headers.

---

## What This Repo Contains

### Core SDK Headers (Pure C)
- `WebView2.h`  
  Unified WebView2 COM interface definitions rewritten for ANSI C

- `WebView2_CAPI.h`  
  C API entry points and environment creation

- `webview2_c.h`  
  ABI-aligned C interface definitions

### Implementation Support
- `WebView2_cmn.h`  
  COM base helpers (`AddRef`, `Release`, refcount handling)

- `WebView2_cbh.h`  
  Callback handler interface definitions

- `WebView2_ctrl.h`  
  Controller completion handlers

- `WebView2_exe.h`  
  Script execution completion handlers

### Tooling
- `BrowserX_ResourceManifest.h`  
  Machine-readable manifest used by tooling and Copilot

---

## What This Repo Does NOT Contain

- ❌ WebView2 runtime binaries
- ❌ Edge browser binaries
- ❌ WebView2Loader.lib
- ❌ WinRT projections
- ❌ C++ helper code
- ❌ Autogenerated IDL artifacts

The **official Microsoft Edge WebView2 Runtime** must be installed separately.

---

## Supported WebView2 Version

This SDK snapshot targets **WebView2 SDK v58**.

The version is pinned intentionally:
- To preserve ABI stability
- To prevent silent interface changes
- To keep COM vtables predictable

Do **not** mix these headers with newer Microsoft SDK headers.

---

## Build Requirements

### Development
- Windows (Win32)
- ANSI C compiler
- Pelles C v13 tested

### Runtime
- Microsoft Edge WebView2 Runtime  
  https://developer.microsoft.com/microsoft-edge/webview2/

---

## Minimal Usage Example

```c
#include <windows.h>
#include <ole2.h>
#include "WebView2.h"

int WINAPI WinMain(HINSTANCE hInst, HINSTANCE hPrev, LPSTR lpCmd, int nShow)
{
    CoInitializeEx(NULL, COINIT_APARTMENTTHREADED);

    /* Create window, then:
       CreateCoreWebView2EnvironmentWithOptions(...)
       CreateCoreWebView2Controller(...)
       Navigate(...)
    */

    CoUninitialize();
    return 0;
}

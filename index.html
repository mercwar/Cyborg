<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mercwar OS – Project Desktop</title>

<style>
/* === GLOBAL BLACK-ON-BLACK THEME === */
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    overflow: hidden;
    background: #000;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    color: #e5e5e5;
}

/* === DESKTOP BACKGROUND === */
#desktop {
    position: relative;
    width: 100vw;
    height: 100vh;
    background:
        radial-gradient(circle at 20% 30%, rgba(250, 204, 21, 0.16), transparent 60%),
        radial-gradient(circle at 80% 70%, rgba(192, 192, 192, 0.14), transparent 60%),
        #000;
}

/* === GLOBAL TYPOGRAPHY SCALE === */
:root {
    --title-font-size: 15px;
    --body-font-size: 15px;
    --control-font-size: 13px;
}

/* === WINDOW FRAME === */
.window {
    position: absolute;
    background: #050505;
    border: 1px solid #555;
    border-radius: 8px;
    box-shadow: 0 0 24px rgba(250, 204, 21, 0.25);
    display: flex;
    flex-direction: column;
    color: #e5e5e5;
    overflow: hidden;
}

.window.active {
    border-color: #facc15;
    box-shadow: 0 0 32px rgba(250, 204, 21, 0.55);
}

/* === TITLE BAR === */
.window-titlebar {
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: linear-gradient(to right, #020202, #111111);
    border-bottom: 1px solid #facc15;
    padding: 0 14px;
    cursor: move;
    user-select: none;
}

.window-title {
    font-size: var(--title-font-size);
    letter-spacing: 0.08em;
    color: #fefce8;
    text-transform: uppercase;
}

/* === WINDOW CONTROLS === */
.window-controls {
    display: flex;
    gap: 6px;
}

.window-controls button {
    width: 22px;
    height: 22px;
    border: none;
    border-radius: 4px;
    padding: 0;
    font-size: var(--control-font-size);
    background: #111;
    color: #d4d4d4;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.window-controls button:hover {
    background: #facc15;
    color: #000;
}

.window-controls .btn-close:hover {
    background: #b91c1c;
    color: #fee2e2;
}

/* === WINDOW CONTENT === */
.window-content {
    flex: 1;
    background: #020202;
    border-radius: 0 0 8px 8px;
    overflow: hidden;
}

.window-content iframe {
    width: 100%;
    height: 100%;
    border: none;
    background: #020202;
}

/* === CONTROL BAR (TOP DESKTOP BAR) === */
#control-bar {
    position: absolute;
    top: 8px;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 16px;
    background: rgba(10, 10, 10, 0.96);
    border: 1px solid #333;
    border-radius: 999px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 0 18px rgba(0, 0, 0, 0.7);
    z-index: 9999;
}

#control-bar .nav-label {
    font-size: var(--body-font-size);
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: #fefce8;
}

#control-bar select {
    background: #000;
    color: #facc15;
    border: 1px solid #555;
    padding: 6px 10px;
    border-radius: 999px;
    font-size: var(--body-font-size);
}

/* === AJAX LOADER === */
.loader {
    width: 40px;
    height: 40px;
    border: 4px solid #222;
    border-top-color: #facc15;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin: 40px auto;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}
</style>
</head>
<body>

<div id="desktop">

    <!-- TOP CONTROL BAR -->
    <div id="control-bar">
        <div class="nav-label">Windows:</div>
        <select id="window-selector">
            <option value="">– Bring window to front –</option>
            <option value="win-cyborg">Cyborg</option>
            <option value="win-demos">Robo‑Knight Demos</option>
            <option value="win-gallery">Robo‑Knight Gallery</option>
            <option value="win-inventory">Robo‑Knight Inventory</option>
            <option value="win-avis-datalake">AVIS Datalake</option>
            <option value="win-avis">AVIS</option>
        </select>
    </div>

    <!-- CYBORG WINDOW -->
    <div class="window active" id="win-cyborg"
         style="left: 40px; top: 70px; width: 640px; height: 420px;">
        <div class="window-titlebar">
            <span class="window-title">Cyborg – AI Translation Language</span>
            <div class="window-controls">
                <button class="btn-min">&#x2212;</button>
                <button class="btn-max">&#x2610;</button>
                <button class="btn-close">&#x2715;</button>
            </div>
        </div>
        <div class="window-content">
            <iframe src="https://mercwar.github.io/Cyborg/"></iframe>
        </div>
    </div>

    <!-- ROBO-KNIGHT DEMOS WINDOW -->
    <div class="window" id="win-demos"
         style="left: 120px; top: 110px; width: 640px; height: 420px;">
        <div class="window-titlebar">
            <span class="window-title">Robo‑Knight Demos</span>
            <div class="window-controls">
                <button class="btn-min">&#x2212;</button>
                <button class="btn-max">&#x2610;</button>
                <button class="btn-close">&#x2715;</button>
            </div>
        </div>
        <div class="window-content">
            <iframe src="https://mercwar.github.io/Robo-Knight-Demos/"></iframe>
        </div>
    </div>

    <!-- ROBO-KNIGHT GALLERY WINDOW -->
    <div class="window" id="win-gallery"
         style="left: 200px; top: 150px; width: 640px; height: 420px;">
        <div class="window-titlebar">
            <span class="window-title">Robo‑Knight Gallery</span>
            <div class="window-controls">
                <button class="btn-min">&#x2212;</button>
                <button class="btn-max">&#x2610;</button>
                <button class="btn-close">&#x2715;</button>
            </div>
        </div>
        <div class="window-content">
            <iframe src="https://mercwar.github.io/Robo-Knight-Gallery/"></iframe>
        </div>
    </div>

    <!-- ROBO-KNIGHT INVENTORY WINDOW -->
    <div class="window" id="win-inventory"
         style="left: 280px; top: 190px; width: 640px; height: 420px;">
        <div class="window-titlebar">
            <span class="window-title">Robo‑Knight Inventory</span>
            <div class="window-controls">
                <button class="btn-min">&#x2212;</button>
                <button class="btn-max">&#x2610;</button>
                <button class="btn-close">&#x2715;</button>
            </div>
        </div>
        <div class="window-content">
            <iframe src="https://mercwar.github.io/robo-knight-inventory/"></iframe>
        </div>
    </div>

    <!-- AVIS DATALAKE WINDOW -->
    <div class="window" id="win-avis-datalake"
         style="left: 360px; top: 230px; width: 640px; height: 420px;">
        <div class="window-titlebar">
            <span class="window-title">AVIS Datalake</span>
            <div class="window-controls">
                <button class="btn-min">&#x2212;</button>
                <button class="btn-max">&#x2610;</button>
                <button class="btn-close">&#x2715;</button>
            </div>
        </div>
        <div class="window-content">
            <iframe src="https://mercwar.github.io/AVIS-DATALAKE/"></iframe>
        </div>
    </div>

    <!-- AVIS WINDOW -->
    <div class="window" id="win-avis"
         style="left: 440px; top: 270px; width: 640px; height: 420px;">
        <div class="window-titlebar">
            <span class="window-title">AVIS</span>
            <div class="window-controls">
                <button class="btn-min">&#x2212;</button>
                <button class="btn-max">&#x2610;</button>
                <button class="btn-close">&#x2715;</button>
            </div>
        </div>
        <div class="window-content">
            <iframe src="https://mercwar.github.io/AVIS/"></iframe>
        </div>
    </div>

</div>

<script>
/* ============================================================
   SYMSYS WINDOW MANAGER — DRAG, FOCUS, MIN/MAX/CLOSE
   ============================================================ */

let zCounter = 10;
let dragState = null;

function bringToFront(win) {
    zCounter++;
    win.style.zIndex = zCounter;
    document.querySelectorAll(".window").forEach(w => w.classList.remove("active"));
    win.classList.add("active");
}

function onTitleMouseDown(e) {
    const win = e.currentTarget.closest(".window");
    bringToFront(win);

    const rect = win.getBoundingClientRect();
    dragState = {
        win,
        startX: e.clientX,
        startY: e.clientY,
        startLeft: rect.left,
        startTop: rect.top
    };

    document.addEventListener("mousemove", onMouseMove);
    document.addEventListener("mouseup", onMouseUp);
}

function onMouseMove(e) {
    if (!dragState) return;

    const dx = e.clientX - dragState.startX;
    const dy = e.clientY - dragState.startY;

    dragState.win.style.left = dragState.startLeft + dx + "px";
    dragState.win.style.top = dragState.startTop + dy + "px";
}

function onMouseUp() {
    dragState = null;
    document.removeEventListener("mousemove", onMouseMove);
    document.removeEventListener("mouseup", onMouseUp);
}

function attachWindow(win) {
    const title = win.querySelector(".window-titlebar");
    title.addEventListener("mousedown", onTitleMouseDown);

    win.addEventListener("mousedown", () => bringToFront(win));

    const content = win.querySelector(".window-content");
    const btnMin = win.querySelector(".btn-min");
    const btnMax = win.querySelector(".btn-max");
    const btnClose = win.querySelector(".btn-close");

    btnMin.onclick = e => {
        e.stopPropagation();
        const isHidden = content.style.display === "none";
        content.style.display = isHidden ? "block" : "none";
    };

    btnMax.onclick = e => {
        e.stopPropagation();
        const max = win.dataset.max === "true";
        if (!max) {
            win.dataset.old = JSON.stringify({
                left: win.style.left,
                top: win.style.top,
                width: win.style.width,
                height: win.style.height
            });
            win.style.left = "4vw";
            win.style.top = "8vh";
            win.style.width = "92vw";
            win.style.height = "84vh";
            win.dataset.max = "true";
        } else {
            const old = JSON.parse(win.dataset.old);
            win.style.left = old.left;
            win.style.top = old.top;
            win.style.width = old.width;
            win.style.height = old.height;
            win.dataset.max = "false";
        }
    };

    btnClose.onclick = e => {
        e.stopPropagation();
        win.style.display = "none";
    };
}

document.querySelectorAll(".window").forEach(attachWindow);

/* ============================================================
   DROPDOWN WINDOW FOCUS
   ============================================================ */

const selector = document.getElementById("window-selector");
selector.addEventListener("change", () => {
    const id = selector.value;
    if (!id) return;
    const win = document.getElementById(id);
    if (!win) return;
    win.style.display = "block";
    bringToFront(win);
});
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CYBORG Desktop</title>

<style>
/* ===== ROBO KNIGHT GOLD ===== */
body {
    margin:0;
    background: radial-gradient(circle at top, #111 0%, #000 70%);
    font-family: Segoe UI, Tahoma, sans-serif;
    color: #f5d76e;
    overflow:hidden;
}

#desktop {
    width:100vw;
    height:100vh;
    position:relative;
}

/* Window */
.window {
    position:absolute;
    width:480px;
    background: linear-gradient(#1a1a1a, #050505);
    border:2px solid #c9a227;
    box-shadow: 0 0 18px rgba(201,162,39,.5), 6px 6px #000;
}

/* Title bar */
.titlebar {
    background: linear-gradient(90deg,#3a2f0b,#c9a227,#3a2f0b);
    color:#000;
    padding:6px 10px;
    font-weight:bold;
    cursor:move;
    user-select:none;
}

/* Content */
.content {
    padding:6px;
    background:#050505;
}

.entry {
    display:flex;
    align-items:center;
    padding:6px 8px;
    cursor:pointer;
    border-bottom:1px solid #1f1a08;
}

.entry:hover {
    background: linear-gradient(90deg,#2b2208,#5a470f);
}

.icon {
    width:26px;
    text-align:center;
    margin-right:8px;
}

/* Footer */
.footer {
    background:#000;
    font-size:11px;
    padding:4px 8px;
    border-top:1px solid #7a6318;
    color:#9a822f;
}

    /* ===== WINDOW CONTENT SCROLLING ===== */
.content {
    padding: 6px;
    background: #050505;
    max-height: 320px;
    overflow: auto;
}

/* Scrollbar styling (WebKit) */
.content::-webkit-scrollbar {
    width: 10px;
}
.content::-webkit-scrollbar-track {
    background: #000;
}
.content::-webkit-scrollbar-thumb {
    background: #c9a227;
    border: 2px solid #3a2f0b;
}

/* File viewer */
.viewer {
    background: #000;
    color: #f5d76e;
    padding: 10px;
    white-space: pre-wrap;
    font-family: Consolas, monospace;
    font-size: 13px;
}

/* Images inside viewer */
.viewer img {
    max-width: 100%;
    border: 1px solid #7a6318;
}

</style>

    
</head>

<body>
<div id="desktop"></div>
<script>
const owner = "mercwar";
const repo  = "Cyborg";

let zIndexTop = 10;
let offset = 30;

/* ===== WINDOW SPAWNER ===== */
function createWindow(title) {
    const win = document.createElement("div");
    win.className = "window";
    win.style.left = offset + "px";
    win.style.top  = offset + "px";
    win.style.zIndex = ++zIndexTop;
    offset += 28;

    const bar = document.createElement("div");
    bar.className = "titlebar";
    bar.textContent = title;

    const content = document.createElement("div");
    content.className = "content";
    content.textContent = "Loading‚Ä¶";

    const footer = document.createElement("div");
    footer.className = "footer";
    footer.textContent = "CYBORG LIVE";

    win.appendChild(bar);
    win.appendChild(content);
    win.appendChild(footer);
    document.getElementById("desktop").appendChild(win);

    makeDraggable(win, bar);
    win.onclick = () => win.style.zIndex = ++zIndexTop;

    return content;
}

/* ===== LOAD DIRECTORY ===== */
function openDirectory(path, title) {
    const container = createWindow("üìÅ " + title);

    fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}`)
        .then(r => r.json())
        .then(items => {
            container.innerHTML = "";
            items.sort((a,b)=>a.type.localeCompare(b.type));

            items.forEach(item => {
                const row = document.createElement("div");
                row.className = "entry";

                row.innerHTML = `
                    <span class="icon">${item.type === "dir" ? "üìÅ" : "üìÑ"}</span>
                    <span>${item.name}</span>
                `;

                row.onclick = e => {
                    e.stopPropagation();
                    item.type === "dir"
                        ? openDirectory(item.path, item.name)
                        : openFile(item);
                };

                container.appendChild(row);
            });
        })
        .catch(() => container.textContent = "Directory load failed.");
}

/* ===== FILE VIEWER ===== */
function openFile(item) {
    const viewer = createWindow("üìÑ " + item.name);
    viewer.classList.add("viewer");

    fetch(item.download_url)
        .then(r => r.text())
        .then(data => {
            if (item.name.match(/\.(png|jpg|jpeg|gif|webp)$/i)) {
                viewer.innerHTML = `<img src="${item.download_url}">`;
            } else {
                viewer.textContent = data;
            }
        })
        .catch(() => viewer.textContent = "File load failed.");
}

/* ===== DRAGGING ===== */
function makeDraggable(win, handle) {
    let dx=0,dy=0;

    handle.onmousedown = e => {
        e.preventDefault();
        dx = e.clientX - win.offsetLeft;
        dy = e.clientY - win.offsetTop;

        document.onmousemove = e2 => {
            win.style.left = (e2.clientX - dx) + "px";
            win.style.top  = (e2.clientY - dy) + "px";
        };

        document.onmouseup = () => {
            document.onmousemove = null;
            document.onmouseup = null;
        };
    };
}

/* ===== BOOT ===== */
openDirectory("CYBORG eV1.0", "CYBORG eV1.0");
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CYBORG Desktop</title>

<style>
/* ===== ROBO KNIGHT GOLD ===== */
body {
    margin:0;
    background: radial-gradient(circle at top, #111 0%, #000 70%);
    font-family: Segoe UI, Tahoma, sans-serif;
    color: #f5d76e;
    overflow:hidden;
}

#desktop {
    width:100vw;
    height:100vh;
    position:relative;
}

/* Window */
.window {
    position:absolute;
    width:480px;
    background: linear-gradient(#1a1a1a, #050505);
    border:2px solid #c9a227;
    box-shadow: 0 0 18px rgba(201,162,39,.5), 6px 6px #000;
}

/* Title bar */
.titlebar {
    background: linear-gradient(90deg,#3a2f0b,#c9a227,#3a2f0b);
    color:#000;
    padding:6px 10px;
    font-weight:bold;
    cursor:move;
    user-select:none;
}

/* Content */
.content {
    padding:6px;
    background:#050505;
}

.entry {
    display:flex;
    align-items:center;
    padding:6px 8px;
    cursor:pointer;
    border-bottom:1px solid #1f1a08;
}

.entry:hover {
    background: linear-gradient(90deg,#2b2208,#5a470f);
}

.icon {
    width:26px;
    text-align:center;
    margin-right:8px;
}

/* Footer */
.footer {
    background:#000;
    font-size:11px;
    padding:4px 8px;
    border-top:1px solid #7a6318;
    color:#9a822f;
}
</style>
</head>

<body>
<div id="desktop"></div>

<script>
const owner = "mercwar";
const repo  = "Cyborg";

let zIndexTop = 10;
let offset = 30;

/* ===== CREATE WINDOW ===== */
function createWindow(path, title) {
    const win = document.createElement("div");
    win.className = "window";
    win.style.left = offset + "px";
    win.style.top  = offset + "px";
    win.style.zIndex = ++zIndexTop;
    offset += 25;

    const bar = document.createElement("div");
    bar.className = "titlebar";
    bar.textContent = title;

    const content = document.createElement("div");
    content.className = "content";
    content.textContent = "Loading‚Ä¶";

    const footer = document.createElement("div");
    footer.className = "footer";
    footer.textContent = "GitHub LIVE";

    win.appendChild(bar);
    win.appendChild(content);
    win.appendChild(footer);
    document.getElementById("desktop").appendChild(win);

    makeDraggable(win, bar);
    loadDirectory(path, content, title);

    win.onclick = () => win.style.zIndex = ++zIndexTop;
}

/* ===== LOAD REAL DIRECTORY ===== */
function loadDirectory(path, container, title) {
    const url = `https://api.github.com/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}`;

    fetch(url)
        .then(r => r.json())
        .then(items => {
            container.innerHTML = "";
            items.sort((a,b)=>a.type.localeCompare(b.type));

            items.forEach(item => {
                const row = document.createElement("div");
                row.className = "entry";

                const icon = document.createElement("span");
                icon.className = "icon";
                icon.textContent = item.type === "dir" ? "üìÅ" : "üìÑ";

                const name = document.createElement("span");
                name.textContent = item.name;

                row.appendChild(icon);
                row.appendChild(name);

                row.onclick = (e) => {
                    e.stopPropagation();
                    if (item.type === "dir") {
                        createWindow(item.path, item.name);
                    } else {
                        window.open(item.html_url, "_blank");
                    }
                };

                container.appendChild(row);
            });
        })
        .catch(() => container.textContent = "Failed to load directory.");
}

/* ===== DRAGGING ===== */
function makeDraggable(win, handle) {
    let x=0,y=0,dx=0,dy=0;

    handle.onmousedown = e => {
        e.preventDefault();
        dx = e.clientX;
        dy = e.clientY;

        document.onmousemove = e2 => {
            x = dx - e2.clientX;
            y = dy - e2.clientY;
            dx = e2.clientX;
            dy = e2.clientY;
            win.style.top  = (win.offsetTop - y) + "px";
            win.style.left = (win.offsetLeft - x) + "px";
        };

        document.onmouseup = () => {
            document.onmousemove = null;
            document.onmouseup = null;
        };
    };
}

/* ===== BOOT ===== */
createWindow("CYBORG eV1.0", "üõ°Ô∏è CYBORG eV1.0");
</script>
</body>
</html>

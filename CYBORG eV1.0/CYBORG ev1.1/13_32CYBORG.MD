# **üìò PAGE 4.0 ‚Äî CYBORG IR (INTERMEDIATE REPRESENTATION)**  
### *AVIS Cyborg Language System ‚Äî MSDN + ISO Hybrid Reference*  
*(Hybrid Markdown + Code‚ÄëStyled Blocks Edition)*  

---

## **4.0 Overview**

The **Cyborg IR (Intermediate Representation)** is the *canonical internal form* of every Cyborg Module.  
It is the bridge between:

- **VB‚Äëstyle Cyborg syntax** (human‚Äëreadable)  
- **Cyborg IR** (machine‚Äëdeterministic)  
- **C output** (compiler‚Äëexecutable)  

The IR is:

- deterministic  
- linear  
- non‚Äëbranching  
- non‚Äëinferential  
- marker‚Äëbound  
- verb‚Äëdriven  

Every valid module MUST produce a **complete IR sequence**, and every IR sequence MUST map to valid C.

This section is **normative**.

---

# **4.1 Purpose of the IR**

The Cyborg IR exists to:

- enforce determinism  
- eliminate ambiguity  
- prevent inference  
- provide a stable internal format  
- guarantee consistent C output  
- ensure strict ordering  
- validate structural correctness  

The IR is the **truth layer** of the Cyborg Language.

---

# **4.2 IR Structure**

A complete IR sequence contains the following components, in order:

```
1. TARGET
2. OPEN_PAYLOAD
3. EXEC_* opcodes (one per verb)
4. SEAL
5. END_TRANSMISSION (optional)
```

### **Canonical IR Skeleton**
```cyborg
TARGET = <context>
OPEN_PAYLOAD
EXEC_<VERB1>
EXEC_<VERB2>
...
SEAL
END_TRANSMISSION
```

---

# **4.3 IR Opcodes (Normative)**

| IR Opcode | Meaning | Source |
|-----------|---------|--------|
| `TARGET = <context>` | Bind execution context | `set to <target>` |
| `OPEN_PAYLOAD` | Begin execution block | `begin` / `#BGIN` |
| `EXEC_VALIDATE` | Execute validation | `validate` |
| `EXEC_SCAN` | Execute scanning | `scan` |
| `EXEC_BUILD` | Execute building | `build` |
| `EXEC_GIVE` | Execute giving | `give` |
| `EXEC_EXPLAIN` | Execute explanation | `explain` |
| `SEAL` | Close payload | `#!#` |
| `END_TRANSMISSION` | End module | `end` |

These opcodes MUST NOT vary.

---

# **4.4 IR Generation Rules**

### **Rule 1 ‚Äî IR MUST be linear**
No branching, no loops, no jumps.

### **Rule 2 ‚Äî IR MUST reflect exact verb order**
The IR is a 1:1 mapping of the payload.

### **Rule 3 ‚Äî IR MUST NOT infer missing elements**
No guessing, no defaults.

### **Rule 4 ‚Äî IR MUST NOT reorder or optimize**
The IR is a *faithful transcription*, not a compiler.

### **Rule 5 ‚Äî IR MUST be complete**
Missing opcodes invalidate the module.

---

# **4.5 IR Example (Simple)**

### **VB‚ÄëStyle**
```vb
set to you
begin
validate
#!#
```

### **IR**
```cyborg
TARGET = AI
OPEN_PAYLOAD
EXEC_VALIDATE
SEAL
```

---

# **4.6 IR Example (Multi‚ÄëVerb)**

### **VB‚ÄëStyle**
```vb
set to file
begin
scan
validate
build
#!#
end
```

### **IR**
```cyborg
TARGET = FILE
OPEN_PAYLOAD
EXEC_SCAN
EXEC_VALIDATE
EXEC_BUILD
SEAL
END_TRANSMISSION
```

---

# **4.7 IR Example (With Comments and Metadata)**

### **VB‚ÄëStyle**
```vb
set to layer
meta "description: test"
' scanning layer
begin
scan
validate
#!#
end
```

### **IR**
```cyborg
TARGET = LAYER
META("description: test")
OPEN_PAYLOAD
EXEC_SCAN
EXEC_VALIDATE
SEAL
END_TRANSMISSION
```

Comments do not appear in IR.  
Metadata appears but is non‚Äëexecutable.

---

# **4.8 Forbidden IR Patterns**

The following MUST NOT appear in IR:

### ‚ùå Missing TARGET  
### ‚ùå Missing OPEN_PAYLOAD  
### ‚ùå Missing SEAL  
### ‚ùå Nested OPEN_PAYLOAD  
### ‚ùå Multiple SEAL opcodes  
### ‚ùå Unknown EXEC_* opcodes  
### ‚ùå Reordered EXEC_* opcodes  
### ‚ùå Inferred EXEC_* opcodes  
### ‚ùå Trailing content after SEAL  

All MUST be rejected.

---

# **4.9 IR ‚Üí C Mapping**

The IR maps directly to C in strict order.

### **IR**
```cyborg
TARGET = AI
OPEN_PAYLOAD
EXEC_SCAN
EXEC_VALIDATE
SEAL
```

### **C Output**
```c
int cyborg_payload(CyborgContext* ctx) {
    int r1 = scan_context(ctx);
    int r2 = validate_context(ctx);
    return (r1 || r2);
}
```

The mapping is **deterministic** and MUST NOT vary.

---

# **4.10 Summary**

Page 4.0 introduces the **Cyborg IR**, the deterministic internal representation of all Cyborg Modules:

- linear  
- strict  
- marker‚Äëbound  
- verb‚Äëdriven  
- non‚Äëinferential  
- directly mapped to C  

The IR is the **machine truth** of the Cyborg Language.


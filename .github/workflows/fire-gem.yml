name: Fire-Gem AVIS Engine
on: [push, workflow_dispatch]

jobs:
  deploy-gem:
    runs-on: ubuntu-latest
    # This block holds your AVIS exactly as you wrote it
    env:
      fire-gem-config:
        avis:
          loader: "fire-gem/fire-gem.sh"
          path: "./fire-gem/"
          executable: "fire-gem.exe"
          message_type: "hello_world"
        runtime:
          shell: "/bin/bash"
          action: "exec"

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Initialize Environment
        run: |
          mkdir -p fire-gem
          # Creating the log file before the ASM runs
          touch fire-gem/fire-gem.log
          chmod +x fire-gem/fire-gem.sh

      - name: Execute AVIS Loader
        run: ./fire-gem/fire-gem.sh

      - name: Upload Fire-Gem Log
        uses: actions/upload-artifact@v4
        with:
          name: fire-gem-log
          path: fire-gem/fire-gem.log
